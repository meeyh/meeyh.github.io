import{a as ce,s as fe,b as me,P as pe}from"./useRandomPlaceholder-35bcbee3.js";import{n as he,l as D,d as w,x as ge,r as p,v as L,y as K,g as y,z as ve,aC as _e,e as m,T as be,aD as ye,aE as Se,G as C,L as G,J as I,I as U,R as Ce,M as Re,K as h,H as V,U as $,aF as Te,_ as H,N as Ie,E as we,ac as Fe,a7 as Be,aG as Pe,S as xe}from"./index-d5026f7b.js";import{_ as Oe}from"./LanguageTag.vue_vue_type_script_setup_true_lang-e47ef460.js";import{P as Ve}from"./PlatformTag-c074c1fa.js";import{b as Ae,u as ke,N as j}from"./usePageCommand-01d77dc6.js";import{f as ze,N as Me,b as Ee,c as Ne,e as De}from"./Select-baadafe6.js";import{u as Ue,f as A,V as $e,b as je,g as Le,c as Ke,h as Ge,i as He}from"./Popover-d6435fef.js";import{c as b}from"./call-7e0089d6.js";import"./getPages-71ee583f.js";import"./platform-c1fe7219.js";import"./Desktop16Regular-2c9962c7.js";import"./language-38dd8b1f.js";import"./Icon-31c39865.js";import"./format-length-46fade60.js";import"./Button-83299e2f.js";import"./Tag-4b4c44c9.js";import"./usePlatformDisplay-f9e50deb.js";import"./PlatformIcon.vue_vue_type_script_setup_true_lang-d591fb28.js";import"./VResizeObserver-f2da7c01.js";function qe(t){return t.map(q)}function q(t){var l,o;return typeof t=="string"?{label:t,value:t}:t.type==="group"?{type:"group",label:(l=t.label)!==null&&l!==void 0?l:t.name,value:(o=t.value)!==null&&o!==void 0?o:t.name,key:t.key||t.name,children:t.children.map(s=>q(s))}:t}const Je=he([D("auto-complete",`
 z-index: auto;
 position: relative;
 display: inline-flex;
 width: 100%;
 `),D("auto-complete-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[ze({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),Qe=Object.assign(Object.assign({},K.props),{to:A.propTo,menuProps:Object,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},defaultValue:{type:String,default:null},loading:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:String,placement:{type:String,default:"bottom-start"},value:String,blurAfterSelect:Boolean,clearAfterSelect:Boolean,getShow:Function,inputProps:Object,renderOption:Function,renderLabel:Function,size:String,options:{type:Array,default:()=>[]},zIndex:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onSelect:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],onInput:[Function,Array]}),We=w({name:"AutoComplete",props:Qe,setup(t){const{mergedBorderedRef:l,namespaceRef:o,mergedClsPrefixRef:a,inlineThemeDisabled:s}=ge(t),d=Ae(t),{mergedSizeRef:F,mergedDisabledRef:B,mergedStatusRef:P}=d,S=p(null),r=p(null),i=p(t.defaultValue),c=L(t,"value"),g=Ue(c,i),v=p(!1),x=p(!1),k=K("AutoComplete","-auto-complete",Je,Se,t,a),z=y(()=>qe(t.options)),J=y(()=>{const{getShow:e}=t;return e?e(g.value||""):!!g.value}),Q=y(()=>J.value&&v.value&&!!z.value.length),W=y(()=>Ne(z.value,De("value","children")));function R(e){const{"onUpdate:value":n,onUpdateValue:u,onInput:f}=t,{nTriggerFormInput:T,nTriggerFormChange:de}=d;u&&b(u,e),n&&b(n,e),f&&b(f,e),i.value=e,T(),de()}function X(e){const{onSelect:n}=t,{nTriggerFormInput:u,nTriggerFormChange:f}=d;n&&b(n,e),u(),f()}function Y(e){const{onBlur:n}=t,{nTriggerFormBlur:u}=d;n&&b(n,e),u()}function Z(e){const{onFocus:n}=t,{nTriggerFormFocus:u}=d;n&&b(n,e),u()}function ee(){x.value=!0}function te(){window.setTimeout(()=>{x.value=!1},0)}function ne(e){var n,u,f;switch(e.key){case"Enter":if(!x.value){const T=(n=r.value)===null||n===void 0?void 0:n.getPendingTmNode();T&&(M(T.rawNode),e.preventDefault())}break;case"ArrowDown":(u=r.value)===null||u===void 0||u.next();break;case"ArrowUp":(f=r.value)===null||f===void 0||f.prev();break}}function M(e){(e==null?void 0:e.value)!==void 0&&(X(e.value),t.clearAfterSelect?R(null):e.label!==void 0&&R(e.label),v.value=!1,t.blurAfterSelect&&ie())}function ae(){R(null)}function oe(e){v.value=!0,Z(e)}function le(e){v.value=!1,Y(e)}function se(e){v.value=!0,R(e)}function re(e){M(e.rawNode)}function ue(e){var n;!((n=S.value)===null||n===void 0)&&n.contains(He(e))||(v.value=!1)}function ie(){var e,n;!((e=S.value)===null||e===void 0)&&e.contains(document.activeElement)&&((n=document.activeElement)===null||n===void 0||n.blur())}const E=y(()=>{const{common:{cubicBezierEaseInOut:e},self:{menuBoxShadow:n}}=k.value;return{"--n-menu-box-shadow":n,"--n-bezier":e}}),_=s?ve("auto-complete",void 0,E,t):void 0,O=p(null),N={focus:()=>{var e;(e=O.value)===null||e===void 0||e.focus()},blur:()=>{var e;(e=O.value)===null||e===void 0||e.blur()}};return{focus:N.focus,blur:N.blur,inputInstRef:O,uncontrolledValue:i,mergedValue:g,isMounted:_e(),adjustedTo:A(t),menuInstRef:r,triggerElRef:S,treeMate:W,mergedSize:F,mergedDisabled:B,active:Q,mergedStatus:P,handleClear:ae,handleFocus:oe,handleBlur:le,handleInput:se,handleToggle:re,handleClickOutsideMenu:ue,handleCompositionStart:ee,handleCompositionEnd:te,handleKeyDown:ne,mergedTheme:k,cssVars:s?void 0:E,themeClass:_==null?void 0:_.themeClass,onRender:_==null?void 0:_.onRender,mergedBordered:l,namespace:o,mergedClsPrefix:a}},render(){const{mergedClsPrefix:t}=this;return m("div",{class:`${t}-auto-complete`,ref:"triggerElRef",onKeydown:this.handleKeyDown,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd},m($e,null,{default:()=>[m(je,null,{default:()=>{if(this.$slots.default)return Le(this.$slots,"default",{handleInput:this.handleInput,handleFocus:this.handleFocus,handleBlur:this.handleBlur,value:this.mergedValue});const{mergedTheme:o}=this;return m(Me,{ref:"inputInstRef",status:this.mergedStatus,theme:o.peers.Input,themeOverrides:o.peerOverrides.Input,bordered:this.mergedBordered,value:this.mergedValue,placeholder:this.placeholder,size:this.mergedSize,disabled:this.mergedDisabled,clearable:this.clearable,loading:this.loading,inputProps:this.inputProps,onClear:this.handleClear,onFocus:this.handleFocus,onUpdateValue:this.handleInput,onBlur:this.handleBlur},{suffix:()=>{var a,s;return(s=(a=this.$slots).suffix)===null||s===void 0?void 0:s.call(a)},prefix:()=>{var a,s;return(s=(a=this.$slots).prefix)===null||s===void 0?void 0:s.call(a)}})}}),m(Ke,{show:this.active,to:this.adjustedTo,containerClass:this.namespace,zIndex:this.zIndex,teleportDisabled:this.adjustedTo===A.tdkey,placement:this.placement,width:"target"},{default:()=>m(be,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var l;if((l=this.onRender)===null||l===void 0||l.call(this),!this.active)return null;const{menuProps:o}=this;return ye(m(Ee,Object.assign({},o,{clsPrefix:t,ref:"menuInstRef",theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,"auto-pending":!0,class:[`${t}-auto-complete-menu`,this.themeClass,o==null?void 0:o.class],style:[o==null?void 0:o.style,this.cssVars],treeMate:this.treeMate,multiple:!1,renderLabel:this.renderLabel,renderOption:this.renderOption,size:"medium",onToggle:this.handleToggle})),[[Ge,this.handleClickOutsideMenu,void 0,{capture:!0}]])}})})]}))}}),Xe=["href"],Ye=w({__name:"PageSearchResultEntry",props:{page:{}},setup(t){const l=t,{command:o}=ke(L(l,"page"));return(a,s)=>(C(),G("a",{href:a.page.path,onClick:s[0]||(s[0]=Te(()=>{},["prevent"])),class:"search-entry-a"},[I(h(j),{justify:"space-between",style:{width:"100%"}},{default:U(()=>[Ce("span",null,Re(h(o)),1),I(h(j),null,{default:U(()=>[a.page.language!==""?(C(),V(Oe,{key:0,language:a.page.language,size:"small"},null,8,["language"])):$("",!0),a.page.platform!=="common"?(C(),V(Ve,{key:1,platform:a.page.platform,language:a.page.language,size:"small"},null,8,["platform","language"])):$("",!0)]),_:1})]),_:1})],8,Xe))}});const Ze=H(Ye,[["__scopeId","data-v-63fda351"]]),et=w({__name:"PageSearchAutoComplete",props:{config:{}},setup(t){const l=t,{placeholder:o}=ce(),a=p(null),s=Ie(),d=p(""),F=we(async()=>{if(d.value==="")return[];const r=l.config.languages,i=l.config.platforms,c=await fe(d.value,{size:20,languages:r,platforms:i});return console.debug(c),c},[]),B=y(()=>F.value.map(r=>({label:r.path,value:r.path,page:r}))),P=r=>m(Ze,{page:r.page});Fe(()=>{Be(()=>{var r,i,c,g;(r=a.value)==null||r.focus(),(g=(c=(i=a.value)==null?void 0:i.inputInstRef)==null?void 0:c.inputElRef)==null||g.setAttribute("autocorrect","off")})});const S=r=>{Pe()?window.open(`https://meeyh.github.io${r}`,"_blank"):s.push(r)};return(r,i)=>(C(),V(h(We),{value:d.value,"onUpdate:value":i[0]||(i[0]=c=>d.value=c),"input-props":{autocomplete:"off",autocorrect:"off",autocapitalize:"off",spellcheck:"false"},options:B.value,placeholder:h(o),"render-label":P,"get-show":()=>!0,"menu-props":{class:"page-search-auto-complete-menu"},onSelect:S,"clear-after-select":"",ref_key:"searchInput",ref:a},null,8,["value","options","placeholder"]))}});const tt={class:"search-combined"},nt=w({__name:"PageSearch",setup(t){const{config:l}=me();return(o,a)=>(C(),G("div",tt,[I(et,{config:h(l)},null,8,["config"]),I(pe,{config:h(l),"onUpdate:config":a[0]||(a[0]=s=>xe(l)?l.value=s:null)},null,8,["config"])]))}});const Ct=H(nt,[["__scopeId","data-v-ade53a63"]]);export{Ct as default};
